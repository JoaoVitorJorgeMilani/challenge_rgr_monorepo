-- BUILDING SCHEMA
DROP TABLE IF EXISTS transfer_taxes;

CREATE TABLE transfer_taxes (
	days_period INT NOT NULL,
	tax NUMERIC(20, 2) NOT NULL,
       PRIMARY KEY (days_period)
);

DROP TABLE IF EXISTS transfer_schedules;

CREATE TABLE transfer_schedules (
	id UUID NOT NULL,
	destination VARCHAR(255) NOT NULL,
	source VARCHAR(255) NOT NULL,
	amount NUMERIC(20, 2) NOT NULL,
	transfer_date DATE NOT NULL,
	tax NUMERIC(20, 2) NOT NULL,
	deleted BOOLEAN NOT NULL DEFAULT FALSE,
	deleted_at TIMESTAMP,
	created_at TIMESTAMP NOT NULL,
	updated_at TIMESTAMP NOT NULL,

	PRIMARY KEY (id)
);

-- BUILDING DEFAULT CONFIG VALUES
INSERT INTO transfer_taxes (days_period, tax) VALUES (0, 2.5);
INSERT INTO transfer_taxes (days_period, tax) VALUES (10, 0);
INSERT INTO transfer_taxes (days_period, tax) VALUES (20, 8.2);
INSERT INTO transfer_taxes (days_period, tax) VALUES (30, 6.9);
INSERT INTO transfer_taxes (days_period, tax) VALUES (40, 4.7);
INSERT INTO transfer_taxes (days_period, tax) VALUES (50, 1.7);

-- BUILDING TEST DATA
INSERT INTO TRANSFER_SCHEDULES (id,source,destination,amount,transfer_date,tax,deleted,deleted_at,created_at,updated_at)
VALUES
  ('E3993927-DBD2-224E-8E6C-D73435CCAAC3','1167722762','7397523677','389.61','2024-05-21','578.26','false','2025-03-06 12:16:40.000016','2024-09-27 16:47:35.000047','2024-12-25 04:15:37.000015'),
  ('F92A8DB1-EE88-EBFA-96D6-BF8B68D9686D','7752762343','3546118599','151.49','2023-05-21','877.60','false','2023-06-18 07:53:31.000053','2024-11-05 01:39:17.000039','2025-02-01 18:00:03.000000'),
  ('FBDAA9BA-9D48-6195-E5AE-C8C3FD896719','4178863283','8027379615','277.59','2024-02-02','896.03','false','2024-11-26 20:28:58.000028','2025-04-30 02:06:39.000006','2024-05-01 01:06:42.000006'),
  ('286A79ED-FB1B-8B72-752B-DD3D650EB79D','7350081978','7617846472','319.62','2023-06-17','537.80','false','2024-07-27 02:10:31.000010','2025-01-10 19:31:08.000031','2024-09-20 19:57:19.000057'),
  ('79185947-5580-9AF1-6726-4872B2394A3E','1841868782','5513802643','56.54','2023-12-04','504.10','false','2023-11-19 03:33:39.000033','2023-09-29 05:12:07.000012','2024-12-05 14:46:53.000046'),
  ('F7641116-42C1-AE93-BF68-9DFDDC40D8A9','2130635706','7181335808','859.33','2024-10-25','353.79','false','2025-05-05 10:15:39.000015','2024-04-08 14:30:40.000030','2024-06-17 03:35:16.000035'),
  ('35B6A1A5-3395-A016-51A2-F86F915D6C6A','4528254041','5603074746','79.05','2023-10-31','925.12','false','2024-01-25 06:50:40.000050','2024-06-27 15:59:12.000059','2025-02-14 22:14:42.000014'),
  ('179E8D48-781D-1557-8B5E-6598D93A11A5','8014428268','9362538785','139.62','2023-12-05','70.89','false','2024-08-20 03:49:10.000049','2023-12-05 22:03:07.000003','2024-12-05 11:51:15.000051'),
  ('B7961D31-E48B-7743-9784-C438862084EA','8546563225','3244288074','55.17','2024-05-19','342.82','false','2025-03-29 06:20:26.000020','2024-08-02 09:28:08.000028','2025-01-03 11:59:00.000059'),
  ('8723B08E-F16E-818A-5A24-E2B74FD4FBA4','5474155841','3222643286','960.80','2024-03-30','630.67','false','2024-12-03 16:52:01.000052','2024-11-02 22:37:28.000037','2024-04-17 08:45:35.000045');
